@using DMB.Core
@using DMB.Core.Elements
@using MudBlazor
@using System.Drawing

<div class="dmr-cell" style="@GetAlignStyle()">

    @if (Cell.Element is null)
    {
        <div class="dmr-empty"></div>
    }
    else if (Cell.Element is GridModelCore subGrid)
    {
        <GridRenderer Grid="subGrid" />
    }
    else
    {
        <ElementRenderer Element="Cell.Element" />
    }

</div>

@code {
    [Parameter, EditorRequired] public CellModelCore Cell { get; set; } = default!;

    private string GetAlignStyle()
    {
        // Flex container alignment based on your ContentAlignment enum
        var jc = ToJustifyContent(Cell.HorizontalAlignment);
        var ai = ToAlignItems(Cell.VerticalAlignment);

        // important: make cell fill its MudItem area
        return $"display:flex; width:100%; height:100%; justify-content:{jc}; align-items:{ai};";
    }

    private static string ToJustifyContent(ContentAlignment a) => a switch
    {
        ContentAlignment.Start => "flex-start",
        ContentAlignment.Center => "center",
        ContentAlignment.End => "flex-end",
        _ => "flex-start"
    };

    private static string ToAlignItems(ContentAlignment a) => a switch
    {
        ContentAlignment.Start => "flex-start",
        ContentAlignment.Center => "center",
        ContentAlignment.End => "flex-end",
        _ => "flex-start"
    };
}